let _componentMegaBlock={_loadingSvg:'<svg version="1.1" style=\'width: 100%;height:100px\' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n   width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">\n  <path opacity="0.2" fill="#000" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n    s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n    c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"/>\n  <path fill="#000" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n    C22.32,8.481,24.301,9.057,26.013,10.047z">\n    <animateTransform attributeType="xml"\n      attributeName="transform"\n      type="rotate"\n      from="0 20 20"\n      to="360 20 20"\n      dur="0.5s"\n      repeatCount="indefinite"/>\n    </path>\n  </svg>',_nodesBindEvent:function(e,t,n){for(let o of e)o.addEventListener(t,n)},_request:function(e,t="GET",n={},o=function(){}){var l=new XMLHttpRequest;l.open(t,e,!0),l.timeout=3e4;var d=document.querySelector('meta[name="csrf-token"]').getAttribute("content");l.setRequestHeader("X-CSRF-TOKEN",d),"GET"==t?(l.setRequestHeader("Content-type","application/text;charset=UTF-8"),l.responseType="text",l.send(null)):(l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.responseType="json",l.send(n)),l.onreadystatechange=function(){if(l.readyState==l.DONE&&200==l.status){var e=l.response;o(e)}},l.onerror=function(e){console.log(e)}}};function _componentAlert(e,t=1,n=function(){}){let o=document.createElement("div");o.innerHTML=e;let l=window.innerWidth/2-140,d=window.innerHeight/2-145;o.style="z-index: 1000000; position: fixed;background-color: rgba(0,0,0,.6);color: #fff;width: 280px;height: 45px;line-height: 40px;border-radius: 3px;text-align: center;top:"+d+"px;left:"+l+"px;",document.getElementsByTagName("BODY")[0].appendChild(o);var i=setTimeout((function(){clearTimeout(i),o.parentNode.removeChild(o),n()}),1e3*t)}function componentDot(e,t,n){function o(){let t=this.cloneNode(!0);t.addEventListener("click",l),document.getElementById(e+"-select").appendChild(t),this.remove(),d()}function l(){let t=this.cloneNode(!0);t.addEventListener("click",o),document.getElementById(e+"-content").appendChild(t),this.remove(),d()}function d(){let t="";document.getElementById(e+"-select").childNodes.forEach((function(e){t+=parseInt(e.getAttribute("data-id"))+","})),t=t.replace(/,$/g,""),u.value=t}let i=document.getElementById(e),a="",s="",r="";for(let e in n)t[e]?(a+="<div class='btn btn-success btn-sm v-tag' data-id='"+e+"'>"+n[e]+"</div>",r+=e+","):s+="<div class='btn btn-primary btn-sm v-tag' data-id='"+e+"'>"+n[e]+"</div>";let c=`<style>.v-tag{margin-right: 4px;margin-bottom: 4px}</style>\n        <div style="width: 100%;display: grid; grid-template-rows: 42px 140px;border: 1px solid #ccc;border-radius: 5px">\n        <div style="display:flex;background: #e1ffa8bf;"><div style="width:120px;background: #e1ffa8bf;">\n        <input id="${e}-search" type="text" class="form-control" placeholder="搜索名称"></div>\n        <div id="${e}-select" style="width:100%;overflow: auto;border-bottom: 1px solid #ccc;padding: 3px;border-radius: 0 0 0 14px;background: #ffffffbf;">${a}</div>\n        </div><div id="${e}-content" style="overflow-y: auto;padding: 3px;background: #e1ffa8bf;">\n        ${s}\n        </div>\n        </div>`;i.insertAdjacentHTML("afterbegin",c);let u=document.createElement("input");u.setAttribute("name",e),u.setAttribute("type","hidden"),u.value="",i.appendChild(u),_componentMegaBlock._nodesBindEvent(document.getElementById(e+"-select").getElementsByClassName("v-tag"),"click",l),_componentMegaBlock._nodesBindEvent(document.getElementById(e+"-content").getElementsByClassName("v-tag"),"click",o),document.getElementById(e+"-search").addEventListener("input",(function(){let t=this.value;if(""==t)return;let n=document.getElementById(e+"-content");for(let e of n.getElementsByClassName("v-tag"))-1!=e.innerText.indexOf(t)&&n.insertBefore(e,n.firstChild)}))}function componentLine(e,t,n){function o(e,t,n,o){switch(t){case"text":default:e.insertAdjacentHTML("afterbegin",'<p style="text-overflow: ellipsis;overflow: hidden;display: block;white-space: nowrap;">'+n+"</p>");break;case"input":let t=document.createElement("input");t.setAttribute("class","form-control"),t.setAttribute("data-column",o),t.value=n,t.addEventListener("input",(function(){let e=this.parentNode.parentNode.getAttribute("data-key"),t=this.getAttribute("data-column"),n=JSON.parse(s.value);n[e]&&(n[e][t]=this.value,s.value=JSON.stringify(n))})),e.appendChild(t)}}function l(e){let t=document.createElement("i");t.setAttribute("class","fa fa-trash"),t.setAttribute("style","cursor: pointer"),t.addEventListener("click",(function(){let e=this.parentNode.parentNode,t=e.parentNode,n=JSON.parse(s.value),o=e.getAttribute("data-key");n.splice(o,1),t.removeChild(e),s.value=JSON.stringify(n);for(let e in t.childNodes)t.childNodes[e]instanceof HTMLElement&&t.childNodes[e].setAttribute("data-key",e)})),e.style="width:30px",e.appendChild(t)}var d=document.getElementById(e);d.style="overflow-x: auto;";var i='<tr style="display:table;width:100%;table-layout:fixed;">',a=i;for(let e in t)"hidden"!=t[e].type&&(t[e].style?(i+='<th style="'+t[e].style+'">'+t[e].name+"</th>",a+='<th style="'+t[e].style+'"><input class="form-control" data-column="'+e+'" placeholder=":'+t[e].name+'"/></th>'):(i+="<th>"+t[e].name+"</th>",a+='<th><input class="form-control" data-column="'+e+'" placeholder=":'+t[e].name+'"/></th>'));i+='<th style="width: 30px"></th></tr>',a+='<th style="width: 30px" class="JsonTableInsert"></th></tr>',d.insertAdjacentHTML("afterbegin",`<style>#${e} tbody::-webkit-scrollbar { width: 0 !important }\n        #${e} th,#${e} td{width: 100px}\n        </style><table class="table table-striped table-bordered table-hover table-responsive"><thead>${i}</thead></table>`);var s=document.createElement("input");s.setAttribute("name",e),s.setAttribute("type","hidden"),s.value="[]",d.appendChild(s);var r=[],c=document.createElement("tbody");n.forEach((function(e,n){let d=document.createElement("tr"),i=!1,a={};for(let l in t){if("hidden"==t[l].type){e[l]&&(a[l]=e[l]);continue}let s=document.createElement("td");e[l]?(a[l]=e[l],i=!0,o(s,t[l].type,e[l],l),t[l].style&&(s.style=t[l].style)):"text"!==t[l].type&&(o(s,t[l].type,"",l),t[l].style&&(s.style=t[l].style)),d.setAttribute("data-key",n),d.appendChild(s)}let u=document.createElement("td");l(u),d.appendChild(u),d.setAttribute("data-key",n),d.setAttribute("style","display:table;width:100%;table-layout:fixed"),i&&(c.setAttribute("style","display:block;max-height:270px;overflow-y:scroll"),c.appendChild(d),r.push(a),s.value=JSON.stringify(r))}));var u=d.getElementsByTagName("table")[0];u.appendChild(c);var p=document.createElement("tfoot");p.style="background:#f3ffdb",p.innerHTML=a,u.appendChild(p);var m=document.createElement("i");m.setAttribute("class","fa fa-edit"),m.style="cursor: pointer",m.addEventListener("click",(function(){let e=JSON.parse(s.value),n=d.getElementsByTagName("tfoot")[0].getElementsByTagName("input"),i={},a=document.createElement("tr");a.style="display:table;width:100%;table-layout:fixed",a.setAttribute("data-key",e.length);for(let e in n)if(n.hasOwnProperty(e)){let l=document.createElement("td"),d=n[e].getAttribute("data-column");i[d]=n[e].value,o(l,t[d].type,n[e].value,d),t[d].style&&(l.style=t[d].style),a.appendChild(l)}let r=document.createElement("td");l(r),a.appendChild(r),c.appendChild(a),e.push(i),s.value=JSON.stringify(e),c.scrollTop=c.scrollHeight})),d.getElementsByClassName("JsonTableInsert")[0].appendChild(m)}function componentPlane(e,t="",n="POST",o=null){""==t&&(t=e);let l={make:function(){this._clear(),this._createModal(),this._createBox()},_clear:function(){this._modalBodyNode=null,this._boxNode=null,this._boxBodyNode=null,this._tableNode=null,this._loadingNode=null},_modalBodyNode:null,_boxNode:null,_boxBodyNode:null,_tableNode:null,_loadingNode:null,_request:function(){this._loading(),_componentMegaBlock._request(e,"GET",{},(function(e){l._loading(!0),$(".modal-body").append(e),$('.modal-body button[type="submit"]')&&$('.modal-body button[type="submit"]').click((function(){l._submitEvent(this)}))}))},_submitEvent:function(e){e.setAttribute("disabled","disabled"),e.innerText="提交中...";let d=l._modalBodyNode.getElementsByTagName("form")[0],i=new FormData(d);_componentMegaBlock._request(t,n,i,(function(t){"function"!=typeof o?0==t.code?window.location.reload():_componentAlert(t.message,3,(function(){e.removeAttribute("disabled"),e.innerText="提交"})):o(t)}))},_createBox:function(){let e=document.createElement("div");e.className="box grid-box";let t=document.createElement("div");t.className="box-body table-responsive no-padding",e.append(t),this._boxNode=e,this._boxBodyNode=t,this._request()},_loading:function(e=!1){if(e&&this._loadingNode)return this._modalBodyNode.removeChild(this._loadingNode),void(this._loadingNode=null);if(this._loadingNode instanceof HTMLElement)return;let t=_componentMegaBlock._loadingSvg,n=document.createElement("div");n.style="width: 100%;height: 100px;",n.innerHTML=t,this._loadingNode=n;let o=this._modalBodyNode.childNodes[0];o instanceof HTMLElement?this._modalBodyNode.insertBefore(n,o):this._modalBodyNode.append(n)},_createModal:function(){let e=document.createElement("div");e.setAttribute("class","modal grid-modal in"),e.setAttribute("tabindex","-1"),e.setAttribute("role","dialog"),e.style="display: block;";let t=document.createElement("div");t.setAttribute("class","modal-dialog modal-lg"),t.setAttribute("role","document"),t.style="width:"+.8*window.innerWidth+"px";let n=document.createElement("div");n.className="modal-content";let o=document.createElement("div");o.className="modal-header",o.style="background-color:#ffffff;padding: 3px;display: flex;justify-content:flex-end;";let l=document.createElement("i");l.setAttribute("class","fa fa-close"),l.setAttribute("style","cursor: pointer"),l.addEventListener("click",(function(){document.body.removeChild(e),document.getElementById("kvFileinputModal")instanceof HTMLElement&&document.body.removeChild(document.getElementById("kvFileinputModal"))}));let d=document.createElement("div");d.className="modal-body",d.style="background-color:#f4f4f4;padding:0;overflow-y:auto;height:"+.8*window.innerHeight+"px",this._modalBodyNode=d,this._loading(),o.append(l),n.append(o),n.append(d),t.append(n),e.appendChild(t),document.body.append(e)}};l.make(e)}