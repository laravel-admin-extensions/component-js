let _componentMegaBlock={_loadingSvg:'<svg version="1.1" style=\'width: 100%;height:100px\' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n   width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">\n  <path opacity="0.2" fill="#000" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n    s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n    c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"/>\n  <path fill="#000" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n    C22.32,8.481,24.301,9.057,26.013,10.047z">\n    <animateTransform attributeType="xml"\n      attributeName="transform"\n      type="rotate"\n      from="0 20 20"\n      to="360 20 20"\n      dur="0.5s"\n      repeatCount="indefinite"/>\n    </path>\n  </svg>',_nodesBindEvent:function(e,t,n){for(let l of e)l.addEventListener(t,n)},_request:function(e,t="GET",n={},l=function(){}){var i=new XMLHttpRequest;i.open(t,e,!0),i.timeout=3e4;var d=document.querySelector('meta[name="csrf-token"]').getAttribute("content");i.setRequestHeader("X-CSRF-TOKEN",d),"GET"==t?(i.setRequestHeader("Content-type","application/text;charset=UTF-8"),i.responseType="text",i.send(null)):(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.responseType="json",i.send(n)),i.onreadystatechange=function(){if(i.readyState==i.DONE&&200==i.status){var e=i.response;l(e)}},i.onerror=function(e){console.log(e)}}};function _componentAlert(e,t=1,n=function(){}){let l=document.createElement("div");l.innerHTML=e;let i=window.innerWidth/2-140,d=window.innerHeight/2-145;l.style="z-index: 1000000; position: fixed;background-color: rgba(0,0,0,.6);color: #fff;width: 280px;height: 45px;line-height: 40px;border-radius: 3px;text-align: center;top:"+d+"px;left:"+i+"px;",document.getElementsByTagName("BODY")[0].appendChild(l);var o=setTimeout((function(){clearTimeout(o),l.parentNode.removeChild(l),n()}),1e3*t)}function componentDot(e,t,n){function l(){let t=this.cloneNode(!0);t.addEventListener("click",i),document.getElementById(e+"-select").appendChild(t),this.remove(),d(t,"insert")}function i(){let t=this.cloneNode(!0);t.addEventListener("click",l),document.getElementById(e+"-content").appendChild(t),this.remove(),d(t,"delete")}function d(n,l){for(let t of c)t.getAttribute("name")==`${e}[data]`&&(o=t),t.getAttribute("name")==`${e}[insert]`&&(a=t),t.getAttribute("name")==`${e}[delete]`&&(s=t);let i=n.getAttribute("data-id"),d=n.innerText,r=JSON.parse(o.value),u=JSON.parse(a.value),p=JSON.parse(s.value);if("insert"==l)return r[i]=d,o.value=JSON.stringify(r),t[i]||u[i]||(u[i]=d,a.value=JSON.stringify(u)),void(p[i]&&(delete p[i],s.value=JSON.stringify(p)));"delete"==l&&(delete r[i],o.value=JSON.stringify(r),t[i]&&!p[i]&&(p[i]=d,s.value=JSON.stringify(p)),u[i]&&(delete u[i],a.value=JSON.stringify(u)))}let o,a,s,r=document.getElementById(e),c=document.getElementsByTagName("input"),u="",p="";for(let e in n)t[e]?u+="<div class='btn btn-success btn-sm v-tag' style='margin-right: 4px;margin-bottom: 4px' data-id='"+e+"'>"+n[e]+"</div>":p+="<div class='btn btn-primary btn-sm v-tag' style='margin-right: 4px;margin-bottom: 4px' data-id='"+e+"'>"+n[e]+"</div>";let m=JSON.stringify(t),h=`<div style="width: 100%;display: grid; grid-template-rows: 42px 140px;border: 1px solid #ccc;border-radius: 5px">\n        <div style="display:flex;background: #e1ffa8bf;"><div style="width:120px;background: #e1ffa8bf;">\n        <input id="${e}-search" type="text" class="form-control" placeholder="搜索名称"></div>\n        <div id="${e}-select" style="width:100%;overflow: auto;border-bottom: 1px solid #ccc;padding: 3px;border-radius: 0 0 0 14px;background: #ffffffbf;">${u}</div>\n        </div><div id="${e}-content" style="overflow-y: auto;padding: 3px;background: #e1ffa8bf;">\n        ${p}</div></div>\n        <input name="${e}[data]" value='${m}' type="hidden">\n        <input name="${e}[insert]" value="{}" type="hidden">\n        <input name="${e}[delete]" value="{}" type="hidden">`;r.insertAdjacentHTML("afterbegin",h),_componentMegaBlock._nodesBindEvent(document.getElementById(e+"-select").getElementsByClassName("v-tag"),"click",i),_componentMegaBlock._nodesBindEvent(document.getElementById(e+"-content").getElementsByClassName("v-tag"),"click",l),document.getElementById(e+"-search").addEventListener("input",(function(){let t=this.value;if(""==t)return;let n=document.getElementById(e+"-content");for(let e of n.getElementsByClassName("v-tag"))-1!=e.innerText.indexOf(t)&&n.insertBefore(e,n.firstChild)}))}function componentLine(e,t,n){function l(e,t,n,l,i){switch(t){case"text":default:e.insertAdjacentHTML("afterbegin",`<p style="text-overflow: ellipsis;overflow: hidden;display: block;white-space: nowrap;" title="${n}">${n}</p>`);break;case"input":let t=document.createElement("input");t.setAttribute("class","form-control"),t.setAttribute("data-column",l),t.value=n,t.style="width:100%;padding:1px";for(let e in i)t.setAttribute(e,i[e]);t.addEventListener("input",(function(){let e=this.parentNode.parentNode.getAttribute("data-key"),t=this.getAttribute("data-column"),n=JSON.parse(s.value);n[e]&&(n[e][t]=this.value,s.value=JSON.stringify(n))})),e.appendChild(t)}}function i(e){let t=document.createElement("i");t.setAttribute("class","fa fa-trash"),t.setAttribute("style","cursor: pointer"),t.addEventListener("click",(function(){let e=this.parentNode.parentNode,t=e.parentNode,n=JSON.parse(s.value),l=e.getAttribute("data-key");n.splice(l,1),t.removeChild(e),s.value=JSON.stringify(n);for(let e in t.childNodes)t.childNodes[e]instanceof HTMLElement&&t.childNodes[e].setAttribute("data-key",e)})),e.style="width:30px",e.appendChild(t)}var d=document.getElementById(e);d.style="overflow-x: auto;";var o='<tr style="display:table;width:100%;table-layout:fixed;">',a=o;for(let e in t)"hidden"!=t[e].type&&(t[e].style?(o+=`<th style="${t[e].style}">${t[e].name}</th>`,a+=`<th style="${t[e].style}"><input class="form-control" data-column="${e}" placeholder=":${t[e].name}"/></th>`):(o+="<th>"+t[e].name+"</th>",a+=`<th><input class="form-control" data-column="${e}" placeholder=":${t[e].name}"/></th>`));o+='<th style="width: 30px"></th></tr>',a+='<th style="width: 30px" class="JsonTableInsert"></th></tr>',d.insertAdjacentHTML("afterbegin",`<style>#${e} tbody::-webkit-scrollbar { width: 0 !important }\n        #${e} th,#${e} td{width: 100px}</style>\n        <table class="table table-striped table-bordered table-hover table-responsive"><thead>${o}</thead></table>`);var s=document.createElement("input");s.setAttribute("name",e),s.setAttribute("type","hidden"),s.value="[]",d.appendChild(s);var r=[],c=document.createElement("tbody");n.forEach((function(e,n){let d=document.createElement("tr"),o=!1,a={};for(let i in t){if("hidden"==t[i].type){e[i]&&(a[i]=e[i]);continue}let s=document.createElement("td");e[i]?(a[i]=e[i],o=!0,l(s,t[i].type,e[i],i),t[i].style&&(s.style=t[i].style)):"text"!==t[i].type&&(l(s,t[i].type,"",i),t[i].style&&(s.style=t[i].style)),d.setAttribute("data-key",n),d.appendChild(s)}let u=document.createElement("td");i(u),d.appendChild(u),d.setAttribute("data-key",n),d.setAttribute("style","display:table;width:100%;table-layout:fixed"),o&&(c.setAttribute("style","display:block;max-height:270px;overflow-y:scroll"),c.appendChild(d),r.push(a),s.value=JSON.stringify(r))}));var u=d.getElementsByTagName("table")[0];u.appendChild(c);var p=document.createElement("tfoot");p.style="background:#f3ffdb",p.innerHTML=a,u.appendChild(p);var m=document.createElement("i");m.setAttribute("class","fa fa-edit"),m.style="cursor: pointer",m.addEventListener("click",(function(){let e=JSON.parse(s.value),n=d.getElementsByTagName("tfoot")[0].getElementsByTagName("input"),o={},a=document.createElement("tr");a.style="display:table;width:100%;table-layout:fixed",a.setAttribute("data-key",e.length);for(let e in n)if(n.hasOwnProperty(e)){let i=document.createElement("td"),d=n[e].getAttribute("data-column");o[d]=n[e].value,l(i,t[d].type,n[e].value,d),t[d].style&&(i.style=t[d].style),a.appendChild(i)}let r=document.createElement("td");i(r),a.appendChild(r),c.appendChild(a),e.push(o),s.value=JSON.stringify(e),c.scrollTop=c.scrollHeight})),d.getElementsByClassName("JsonTableInsert")[0].appendChild(m)}function componentPlane(e,t="",n="POST",l=null){""==t&&(t=e);let i={make:function(){this._clear(),this._createModal(),this._createBox()},_clear:function(){this._modalBodyNode=null,this._boxNode=null,this._boxBodyNode=null,this._tableNode=null,this._loadingNode=null},_modalBodyNode:null,_boxNode:null,_boxBodyNode:null,_tableNode:null,_loadingNode:null,_request:function(){this._loading(),_componentMegaBlock._request(e,"GET",{},(function(e){i._loading(!0),$(".modal-body").append(e),$('.modal-body button[type="submit"]')&&$('.modal-body button[type="submit"]').click((function(){i._submitEvent(this)}))}))},_submitEvent:function(e){e.setAttribute("disabled","disabled"),e.innerText="提交中...";let d=i._modalBodyNode.getElementsByTagName("form")[0],o=new FormData(d);_componentMegaBlock._request(t,n,o,(function(t){"function"!=typeof l?0==t.code?window.location.reload():_componentAlert(t.message,3,(function(){e.removeAttribute("disabled"),e.innerText="提交"})):l(t)}))},_createBox:function(){let e=document.createElement("div");e.className="box grid-box";let t=document.createElement("div");t.className="box-body table-responsive no-padding",e.append(t),this._boxNode=e,this._boxBodyNode=t,this._request()},_loading:function(e=!1){if(e&&this._loadingNode)return this._modalBodyNode.removeChild(this._loadingNode),void(this._loadingNode=null);if(this._loadingNode instanceof HTMLElement)return;let t=_componentMegaBlock._loadingSvg,n=document.createElement("div");n.style="width: 100%;height: 100px;",n.innerHTML=t,this._loadingNode=n;let l=this._modalBodyNode.childNodes[0];l instanceof HTMLElement?this._modalBodyNode.insertBefore(n,l):this._modalBodyNode.append(n)},_createModal:function(){let e=document.createElement("div");e.setAttribute("class","modal grid-modal in"),e.setAttribute("tabindex","-1"),e.setAttribute("role","dialog"),e.style="display: block;";let t=document.createElement("div");t.setAttribute("class","modal-dialog modal-lg"),t.setAttribute("role","document"),t.style="width:"+.8*window.innerWidth+"px";let n=document.createElement("div");n.className="modal-content";let l=document.createElement("div");l.className="modal-header",l.style="background-color:#ffffff;padding: 3px;display: flex;justify-content:flex-end;";let i=document.createElement("i");i.setAttribute("class","fa fa-close"),i.setAttribute("style","cursor: pointer"),i.addEventListener("click",(function(){document.body.removeChild(e),document.getElementById("kvFileinputModal")instanceof HTMLElement&&document.body.removeChild(document.getElementById("kvFileinputModal"))}));let d=document.createElement("div");d.className="modal-body",d.style="background-color:#f4f4f4;padding:0;overflow-y:auto;max-height:"+.8*window.innerHeight+"px;min-height:"+.4*window.innerHeight+"px;",this._modalBodyNode=d,this._loading(),l.append(i),n.append(l),n.append(d),t.append(n),e.appendChild(t),document.body.append(e)}};i.make(e)}